<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Medical Report Summarizer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        const loadingMessages = [
            "Extracting blood, metaphorically…",
            "Consulting AI stethoscope…",
            "Drawing diagnostic conclusions…",
            "Analyzing biomarkers…",
            "Extracting lab metrics...",
            "Calling the language model...",
            "Analyzing hematology trends...",
            "Parsing medical terminology...",
            "Matching biomarkers to patterns...",
            "Evaluating test boundaries...",
            "Extracting DNA from PDFs...",
            "Consulting Dr. GPT...",
            "Diagnosing pixels...",
            "Measuring Hemoglobin vibes...",
            "Calibrating AI stethoscope...",
            "Mixing LLM enzymes..." ,
            "Talking to my inner doctor…",
            "Decoding the red blood mysteries…",
            "Running virtual bloodwork…",
            "Calling LLM… Hope it's not on a break!"
        ];

        function showFileName(input) {
            const fileLabel = document.getElementById("filename");
            if (input.files.length > 0) {
                fileLabel.textContent = "Selected file: " + input.files[0].name;
            } else {
                fileLabel.textContent = "No file selected";
            }
        }

        function startLoading() {
            const loadingBox = document.getElementById("loading-box");
            const msg = document.getElementById("loading-msg");
            loadingBox.style.display = "block";
            let i = 0;

            setInterval(() => {
                msg.textContent = loadingMessages[Math.floor(Math.random() * loadingMessages.length)];
            }, 2000);
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Medical Report Summarizer</h1>
        <form method="POST" enctype="multipart/form-data" onsubmit="startLoading()">
            <label for="report" class="upload-box">
                Click here to upload your lab report (PDF or image)
                <input type="file" name="report" id="report" accept=".pdf,.jpg,.jpeg,.png" required onchange="showFileName(this)">
            </label>

            <div id="filename" class="filename-preview">No file selected</div>

            <button type="submit" class="btn">Analyze Report</button>
        </form>

        <div id="loading-box" style="display:none;">
            <div class="loader"></div>
            <p id="loading-msg">Processing...</p>
        </div>
    </div>
</body>
</html>